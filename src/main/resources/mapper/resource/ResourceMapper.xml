<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cc.mrbird.febs.resource.mapper.ResourceMapper">

    <resultMap id="resource" type="cc.mrbird.febs.resource.entity.Resource">
        <id column="resource_id" jdbcType="DECIMAL" property="resourceId"/>
        <result column="resource_name" jdbcType="VARCHAR" property="resourceName"/>
        <result column="creator" jdbcType="VARCHAR" property="creator"/>
        <result column="school" jdbcType="VARCHAR" property="school"/>
        <result column="grade" jdbcType="VARCHAR" property="grade"/>
        <result column="subject" jdbcType="VARCHAR" property="subject"/>
        <result column="category_id" jdbcType="DECIMAL" property="categoryId"/>
        <result column="category_name" jdbcType="VARCHAR" property="categoryName"/>
        <result column="file_type" jdbcType="VARCHAR" property="fileType"/>
        <result column="pic" jdbcType="VARCHAR" property="pic"/>
        <result column="url" jdbcType="VARCHAR" property="url"/>
        <result column="star" jdbcType="INTEGER" property="star"/>
        <result column="description" jdbcType="VARCHAR" property="description"/>
        <result column="read_count" jdbcType="INTEGER" property="readCount"/>
        <result column="comment_count" jdbcType="INTEGER" property="commentCount"/>
        <result column="order_num" jdbcType="DECIMAL" property="orderNum"/>
        <result column="status" jdbcType="INTEGER" property="status"/>
        <result column="create_time" jdbcType="TIMESTAMP" property="createTime"/>
        <result column="modify_time" jdbcType="TIMESTAMP" property="modifyTime"/>
    </resultMap>
    <update id="increaseCommentCount">
		update r_resource
		<set>comment_count = comment_count + #{num}</set>
		where resource_id = #{resourceId}
	</update>
	<update id="increaseReadCount">
		update r_resource
		<set>read_count = read_count + #{num}</set>
		where resource_id = #{resourceId}
	</update>
</mapper>
